"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1339],{5147:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"technicals/classes/Shop","title":"Shop","description":"La classe Shop g\xe8re la boutique de vaisseaux dans Xenon Space. Elle fournit une interface graphique interactive permettant aux joueurs d\'acheter des vaisseaux et d\'am\xe9liorer leur base pendant la partie.","source":"@site/docs/technicals/classes/Shop.md","sourceDirName":"technicals/classes","slug":"/technicals/classes/Shop","permalink":"/xenon-space---Video-game/docs/technicals/classes/Shop","draft":false,"unlisted":false,"editUrl":"https://github.com/nonov1012/xenon-space---Video-game/tree/main/website/docs/technicals/classes/Shop.md","tags":[],"version":"current","frontMatter":{},"sidebar":"technicalSidebar","previous":{"title":"Type et Point","permalink":"/xenon-space---Video-game/docs/technicals/classes/Point"},"next":{"title":"Turn","permalink":"/xenon-space---Video-game/docs/technicals/classes/Turn"}}');var r=n(4848),l=n(8453);const a={},d="Shop",t={},c=[{value:"\ud83d\udccb Vue d&#39;ensemble",id:"-vue-densemble",level:2},{value:"\ud83c\udfd7\ufe0f Constructeur",id:"\ufe0f-constructeur",level:2},{value:"Param\xe8tres",id:"param\xe8tres",level:3},{value:"Attributs initialis\xe9s",id:"attributs-initialis\xe9s",level:3},{value:"\ud83d\udce6 Catalogue de vaisseaux",id:"-catalogue-de-vaisseaux",level:2},{value:"Structure du catalogue",id:"structure-du-catalogue",level:3},{value:"Format d&#39;un vaisseau",id:"format-dun-vaisseau",level:3},{value:"Tableau des vaisseaux",id:"tableau-des-vaisseaux",level:3},{value:"\ud83c\udff0 Syst\xe8me d&#39;am\xe9lioration de base",id:"-syst\xe8me-dam\xe9lioration-de-base",level:2},{value:"Structure des upgrades",id:"structure-des-upgrades",level:3},{value:"Tableau de progression",id:"tableau-de-progression",level:3},{value:"\ud83d\uddbc\ufe0f Chargement des ressources",id:"\ufe0f-chargement-des-ressources",level:2},{value:"<code>load_image</code>",id:"load_image",level:3},{value:"Param\xe8tres",id:"param\xe8tres-1",level:4},{value:"Retour",id:"retour",level:4},{value:"Comportement",id:"comportement",level:4},{value:"\ud83d\udcb0 Gestion des transactions",id:"-gestion-des-transactions",level:2},{value:"<code>buy_ship</code>",id:"buy_ship",level:3},{value:"Param\xe8tres",id:"param\xe8tres-2",level:4},{value:"Retour",id:"retour-1",level:4},{value:"S\xe9quence d&#39;achat",id:"s\xe9quence-dachat",level:4},{value:"Exemple d&#39;utilisation",id:"exemple-dutilisation",level:4},{value:"<code>upgrade_base</code>",id:"upgrade_base",level:3},{value:"Retour",id:"retour-2",level:4},{value:"Comportement",id:"comportement-1",level:4},{value:"Exemples",id:"exemples",level:4},{value:"\ud83c\udfa8 Affichage graphique",id:"-affichage-graphique",level:2},{value:"<code>get_base_color_filter</code>",id:"get_base_color_filter",level:3},{value:"Palette de couleurs",id:"palette-de-couleurs",level:4},{value:"<code>draw</code>",id:"draw",level:3},{value:"1. Fond du shop",id:"1-fond-du-shop",level:4},{value:"2. Bordures d\xe9coratives",id:"2-bordures-d\xe9coratives",level:4},{value:"3. Calcul de la disposition",id:"3-calcul-de-la-disposition",level:4},{value:"4. Dessin des vaisseaux",id:"4-dessin-des-vaisseaux",level:4},{value:"5. Dessin de la base (am\xe9lioration)",id:"5-dessin-de-la-base-am\xe9lioration",level:4},{value:"\ud83c\udfae Gestion des clics",id:"-gestion-des-clics",level:2},{value:"<code>handle_click</code>",id:"handle_click",level:3},{value:"Param\xe8tres",id:"param\xe8tres-3",level:4},{value:"Retour",id:"retour-3",level:4},{value:"Flux de d\xe9tection",id:"flux-de-d\xe9tection",level:4},{value:"\ud83c\udfaf Int\xe9gration dans le jeu",id:"-int\xe9gration-dans-le-jeu",level:2},{value:"Initialisation dans <code>main.py</code>",id:"initialisation-dans-mainpy",level:3},{value:"Boucle de jeu",id:"boucle-de-jeu",level:3},{value:"\ud83d\udcca Diagramme de s\xe9quence complet",id:"-diagramme-de-s\xe9quence-complet",level:2},{value:"Achat de vaisseau avec placement",id:"achat-de-vaisseau-avec-placement",level:3},{value:"\ud83c\udfa8 Effets visuels",id:"-effets-visuels",level:2},{value:"\xc9tats des boutons",id:"\xe9tats-des-boutons",level:3},{value:"Animation de la base",id:"animation-de-la-base",level:3},{value:"\ud83e\uddea Tests et validation",id:"-tests-et-validation",level:2},{value:"Test des achats",id:"test-des-achats",level:3},{value:"\ud83d\udd0d Cas limites",id:"-cas-limites",level:2},{value:"1. Achat avec solde exact",id:"1-achat-avec-solde-exact",level:3},{value:"2. Am\xe9lioration au niveau max",id:"2-am\xe9lioration-au-niveau-max",level:3},{value:"3. Images manquantes",id:"3-images-manquantes",level:3},{value:"4. Clics hors zone",id:"4-clics-hors-zone",level:3},{value:"5. Am\xe9lioration sans fonds",id:"5-am\xe9lioration-sans-fonds",level:3},{value:"\ud83c\udfaf Optimisations possibles",id:"-optimisations-possibles",level:2},{value:"1. Cache des rectangles",id:"1-cache-des-rectangles",level:3},{value:"2. Sprite batching",id:"2-sprite-batching",level:3},{value:"3. Pr\xe9chargement des tooltips",id:"3-pr\xe9chargement-des-tooltips",level:3},{value:"\ud83c\udfa8 Variantes de design",id:"-variantes-de-design",level:2},{value:"Shop minimaliste",id:"shop-minimaliste",level:3},{value:"Shop avec animations",id:"shop-avec-animations",level:3},{value:"\ud83d\udd17 Interactions avec d&#39;autres classes",id:"-interactions-avec-dautres-classes",level:2},{value:"Relations cl\xe9s",id:"relations-cl\xe9s",level:3},{value:"\ud83d\udcd0 Calculs de disposition",id:"-calculs-de-disposition",level:2},{value:"Formules de positionnement",id:"formules-de-positionnement",level:3},{value:"Exemple num\xe9rique (1920\xd71080)",id:"exemple-num\xe9rique-19201080",level:3},{value:"\ud83c\udf93 Bonnes pratiques",id:"-bonnes-pratiques",level:2},{value:"\ud83d\udc1b Probl\xe8mes connus",id:"-probl\xe8mes-connus",level:2},{value:"1. Pas de limite de vaisseaux",id:"1-pas-de-limite-de-vaisseaux",level:3},{value:"2. Shop ne se met pas \xe0 jour visuellement",id:"2-shop-ne-se-met-pas-\xe0-jour-visuellement",level:3},{value:"3. Collision de clics",id:"3-collision-de-clics",level:3},{value:"\ud83d\udcca M\xe9triques de performance",id:"-m\xe9triques-de-performance",level:2},{value:"Temps de rendu (approximatif)",id:"temps-de-rendu-approximatif",level:3},{value:"\ud83d\udd2e Fonctionnalit\xe9s futures",id:"-fonctionnalit\xe9s-futures",level:2},{value:"1. Onglets de cat\xe9gories",id:"1-onglets-de-cat\xe9gories",level:3},{value:"2. Aper\xe7u des statistiques",id:"2-aper\xe7u-des-statistiques",level:3},{value:"3. Raccourcis clavier",id:"3-raccourcis-clavier",level:3},{value:"\ud83d\udcda R\xe9f\xe9rences",id:"-r\xe9f\xe9rences",level:2},{value:"\ud83d\udca1 Conseils d&#39;int\xe9gration",id:"-conseils-dint\xe9gration",level:2},{value:"Pattern recommand\xe9",id:"pattern-recommand\xe9",level:3}];function o(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"shop",children:(0,r.jsx)(s.code,{children:"Shop"})})}),"\n",(0,r.jsxs)(s.p,{children:["La classe ",(0,r.jsx)(s.code,{children:"Shop"})," g\xe8re la ",(0,r.jsx)(s.strong,{children:"boutique de vaisseaux"})," dans Xenon Space. Elle fournit une interface graphique interactive permettant aux joueurs d'acheter des vaisseaux et d'am\xe9liorer leur base pendant la partie."]}),"\n",(0,r.jsx)(s.admonition,{title:"Principe de conception",type:"tip",children:(0,r.jsxs)(s.p,{children:["Cette classe suit le principe de ",(0,r.jsx)(s.strong,{children:"s\xe9paration des pr\xe9occupations"})," : elle g\xe8re \xe0 la fois la logique m\xe9tier (transactions) et l'affichage (interface graphique), tout en d\xe9l\xe9guant la gestion financi\xe8re \xe0 la classe ",(0,r.jsx)(s.code,{children:"Economie"}),"."]})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-vue-densemble",children:"\ud83d\udccb Vue d'ensemble"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import pygame\nfrom blazyck import *\n\nclass Shop:\n    def __init__(self, player, font, screen):\n        self.player = player\n        self.font = font\n        self.screen = screen\n        self.base_level = 1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"R\xf4le principal :"})," G\xe9rer l'achat de vaisseaux et l'am\xe9lioration de la base du joueur via une interface graphique."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"D\xe9pendances :"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/classes/Player",children:(0,r.jsx)(s.code,{children:"Player"})})," - Propri\xe9taire de la boutique"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/classes/Economie",children:(0,r.jsx)(s.code,{children:"Economie"})})," - Gestion des transactions"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://www.pygame.org/",children:(0,r.jsx)(s.code,{children:"pygame"})})," - Rendu graphique"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/constantes",children:(0,r.jsx)(s.code,{children:"blazyck"})})," - Constantes d'interface"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\ufe0f-constructeur",children:"\ud83c\udfd7\ufe0f Constructeur"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"def __init__(self, player, font, screen):\n"})}),"\n",(0,r.jsx)(s.h3,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tre"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"player"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/classes/Player",children:(0,r.jsx)(s.code,{children:"Player"})})}),(0,r.jsx)(s.td,{children:"Joueur propri\xe9taire de la boutique"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"font"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"pygame.font.Font"})}),(0,r.jsx)(s.td,{children:"Police pour le texte des boutons"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"screen"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"pygame.Surface"})}),(0,r.jsx)(s.td,{children:"Surface d'affichage du jeu"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"attributs-initialis\xe9s",children:"Attributs initialis\xe9s"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Attribut"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Valeur initiale"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.player"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Player"})}),(0,r.jsx)(s.td,{children:"Param\xe8tre"}),(0,r.jsx)(s.td,{children:"R\xe9f\xe9rence au joueur"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.font"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Font"})}),(0,r.jsx)(s.td,{children:"Param\xe8tre"}),(0,r.jsx)(s.td,{children:"Police de texte"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.screen"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Surface"})}),(0,r.jsx)(s.td,{children:"Param\xe8tre"}),(0,r.jsx)(s.td,{children:"Surface de rendu"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.base_level"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"int"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1"})}),(0,r.jsx)(s.td,{children:"Niveau actuel de la base"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.base_image"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Surface"})}),(0,r.jsx)(s.td,{children:"Charg\xe9e"}),(0,r.jsx)(s.td,{children:"Image de la base"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.ships"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"list[dict]"})}),(0,r.jsx)(s.td,{children:"Catalogue"}),(0,r.jsx)(s.td,{children:"Liste des vaisseaux disponibles"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"self.base_upgrades"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"list[dict]"})}),(0,r.jsx)(s.td,{children:"Upgrades"}),(0,r.jsx)(s.td,{children:"Liste des am\xe9liorations de base"})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-catalogue-de-vaisseaux",children:"\ud83d\udce6 Catalogue de vaisseaux"}),"\n",(0,r.jsx)(s.h3,{id:"structure-du-catalogue",children:"Structure du catalogue"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'self.ships = [\n    {"name": "Petit", "price": 325, "image": self.load_image("assets/img/ships/shop/petit.png")},\n    {"name": "Moyen", "price": 650, "image": self.load_image("assets/img/ships/shop/moyen.png")},\n    {"name": "Grand", "price": 1050, "image": self.load_image("assets/img/ships/shop/grand.png")},\n    {"name": "Foreuse", "price": 400, "image": self.load_image("assets/img/ships/shop/foreuse.png")},\n    {"name": "Transporteur", "price": 500, "image": self.load_image("assets/img/ships/shop/transporteur.png")}\n]\n'})}),"\n",(0,r.jsx)(s.h3,{id:"format-dun-vaisseau",children:"Format d'un vaisseau"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Cl\xe9"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"name"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"str"})}),(0,r.jsx)(s.td,{children:"Nom du vaisseau (identifiant)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"price"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"int"})}),(0,r.jsx)(s.td,{children:"Co\xfbt en monnaie (\u20bf)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"image"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"pygame.Surface"})}),(0,r.jsx)(s.td,{children:"Image de pr\xe9visualisation"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"tableau-des-vaisseaux",children:"Tableau des vaisseaux"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Vaisseau"}),(0,r.jsx)(s.th,{children:"Prix"}),(0,r.jsx)(s.th,{children:"R\xf4le"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["\ud83c\udfc3 ",(0,r.jsx)(s.strong,{children:"Petit"})]}),(0,r.jsx)(s.td,{children:"325\u20bf"}),(0,r.jsx)(s.td,{children:"Vaisseau l\xe9ger, rapide"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["\u2696\ufe0f ",(0,r.jsx)(s.strong,{children:"Moyen"})]}),(0,r.jsx)(s.td,{children:"650\u20bf"}),(0,r.jsx)(s.td,{children:"Vaisseau \xe9quilibr\xe9"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["\ud83d\udee1\ufe0f ",(0,r.jsx)(s.strong,{children:"Grand"})]}),(0,r.jsx)(s.td,{children:"1050\u20bf"}),(0,r.jsx)(s.td,{children:"Vaisseau lourd, r\xe9sistant"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["\u26cf\ufe0f ",(0,r.jsx)(s.strong,{children:"Foreuse"})]}),(0,r.jsx)(s.td,{children:"400\u20bf"}),(0,r.jsx)(s.td,{children:"Minage de ressources"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["\ud83d\ude9a ",(0,r.jsx)(s.strong,{children:"Transporteur"})]}),(0,r.jsx)(s.td,{children:"500\u20bf"}),(0,r.jsx)(s.td,{children:"Transport de vaisseaux"})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-syst\xe8me-dam\xe9lioration-de-base",children:"\ud83c\udff0 Syst\xe8me d'am\xe9lioration de base"}),"\n",(0,r.jsx)(s.h3,{id:"structure-des-upgrades",children:"Structure des upgrades"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'self.base_upgrades = [\n    {"level": 2, "price": 1000},\n    {"level": 3, "price": 2000},\n    {"level": 4, "price": 6000}\n]\n'})}),"\n",(0,r.jsx)(s.h3,{id:"tableau-de-progression",children:"Tableau de progression"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Niveau"}),(0,r.jsx)(s.th,{children:"PV"}),(0,r.jsx)(s.th,{children:"Gain/tour"}),(0,r.jsx)(s.th,{style:{textAlign:"right"},children:"Co\xfbt upgrade"}),(0,r.jsx)(s.th,{style:{textAlign:"right"},children:"ROI (tours)"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"1"})}),(0,r.jsx)(s.td,{children:"500"}),(0,r.jsx)(s.td,{children:"300\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"\u2014"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"\u2014"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"2"})}),(0,r.jsx)(s.td,{children:"700"}),(0,r.jsx)(s.td,{children:"400\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"1000\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"10"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"3"})}),(0,r.jsx)(s.td,{children:"1200"}),(0,r.jsx)(s.td,{children:"500\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"2000\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"20"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"4"})}),(0,r.jsx)(s.td,{children:"1600"}),(0,r.jsx)(s.td,{children:"600\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"6000\u20bf"}),(0,r.jsx)(s.td,{style:{textAlign:"right"},children:"60"})]})]})]}),"\n",(0,r.jsxs)(s.admonition,{title:"Calcul ROI",type:"info",children:[(0,r.jsx)(s.p,{children:"ROI = Co\xfbt \xf7 (Nouveau gain - Ancien gain)"}),(0,r.jsxs)(s.p,{children:["Exemple Nv1\u21922 : 1000\u20bf \xf7 (400-300) = ",(0,r.jsx)(s.strong,{children:"10 tours"})," pour rentabiliser"]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\ufe0f-chargement-des-ressources",children:"\ud83d\uddbc\ufe0f Chargement des ressources"}),"\n",(0,r.jsx)(s.h3,{id:"load_image",children:(0,r.jsx)(s.code,{children:"load_image"})}),"\n",(0,r.jsx)(s.p,{children:"Charge et redimensionne une image, avec gestion des erreurs."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"def load_image(self, path, size=(ICON_SIZE, ICON_SIZE)):\n    try:\n        img = pygame.image.load(path).convert_alpha()\n        return pygame.transform.scale(img, size)\n    except pygame.error:\n        placeholder = pygame.Surface(size, pygame.SRCALPHA)\n        placeholder.fill((150, 150, 150))\n        return placeholder\n"})}),"\n",(0,r.jsx)(s.h4,{id:"param\xe8tres-1",children:"Param\xe8tres"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tre"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Valeur par d\xe9faut"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"path"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"str"})}),(0,r.jsx)(s.td,{children:"\u2014"}),(0,r.jsx)(s.td,{children:"Chemin vers l'image"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"size"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tuple[int, int]"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(ICON_SIZE, ICON_SIZE)"})}),(0,r.jsx)(s.td,{children:"Dimensions finales"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"retour",children:"Retour"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"pygame.Surface"})}),(0,r.jsx)(s.td,{children:"Image charg\xe9e et redimensionn\xe9e, ou placeholder gris en cas d'erreur"})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"comportement",children:"Comportement"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph TD\n    A[load_image] --\x3e B{Fichier existe?}\n    B --\x3e|Oui| C[Charger image]\n    B --\x3e|Non| D[Cr\xe9er placeholder gris]\n    C --\x3e E[Redimensionner]\n    E --\x3e F[Retourner Surface]\n    D --\x3e F\n    \n    style F fill:#00C864\n"})}),"\n",(0,r.jsx)(s.admonition,{title:"Robustesse",type:"tip",children:(0,r.jsxs)(s.p,{children:["Le placeholder gris ",(0,r.jsx)(s.strong,{children:"garantit"})," que le jeu ne crash pas m\xeame si des images sont manquantes."]})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-gestion-des-transactions",children:"\ud83d\udcb0 Gestion des transactions"}),"\n",(0,r.jsx)(s.h3,{id:"buy_ship",children:(0,r.jsx)(s.code,{children:"buy_ship"})}),"\n",(0,r.jsx)(s.p,{children:"Tente d'acheter un vaisseau et retourne son nom en cas de succ\xe8s."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def buy_ship(self, ship):\n    """Ach\xe8te un vaisseau et retourne son nom si l\'achat r\xe9ussit"""\n    if self.player.economie.retirer(ship["price"]):\n        return ship["name"]\n    else:\n        return None\n'})}),"\n",(0,r.jsx)(s.h4,{id:"param\xe8tres-2",children:"Param\xe8tres"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tre"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ship"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"dict"})}),(0,r.jsxs)(s.td,{children:["Dictionnaire du vaisseau (doit contenir ",(0,r.jsx)(s.code,{children:'"name"'})," et ",(0,r.jsx)(s.code,{children:'"price"'}),")"]})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"retour-1",children:"Retour"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Valeur"}),(0,r.jsx)(s.th,{children:"Condition"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"str"})}),(0,r.jsx)(s.td,{children:"Nom du vaisseau"}),(0,r.jsx)(s.td,{children:"Achat r\xe9ussi"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"None"})}),(0,r.jsx)(s.td,{children:"\u2014"}),(0,r.jsx)(s.td,{children:"Fonds insuffisants"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"s\xe9quence-dachat",children:"S\xe9quence d'achat"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:'sequenceDiagram\n    participant S as Shop\n    participant P as Player\n    participant E as Economie\n    \n    S->>P: Demande achat (ship)\n    P->>E: retirer(ship["price"])\n    \n    alt Fonds suffisants\n        E->>E: solde -= price\n        E->>P: True\n        P->>S: ship["name"]\n        Note over S: Retourner "Petit"\n    else Fonds insuffisants\n        E->>P: False\n        P->>S: None\n        Note over S: Achat \xe9chou\xe9\n    end\n'})}),"\n",(0,r.jsx)(s.h4,{id:"exemple-dutilisation",children:"Exemple d'utilisation"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'shop = Shop(player, font, screen)\n\n# Tentative d\'achat\nship_data = {"name": "Moyen", "price": 650}\nresult = shop.buy_ship(ship_data)\n\nif result:\n    print(f"\u2705 Achat de {result} r\xe9ussi !")\nelse:\n    print("\u274c Fonds insuffisants")\n'})}),"\n",(0,r.jsx)(s.admonition,{title:"D\xe9l\xe9gation",type:"info",children:(0,r.jsxs)(s.p,{children:["La m\xe9thode ",(0,r.jsx)(s.strong,{children:"d\xe9l\xe8gue"})," la v\xe9rification financi\xe8re \xe0 ",(0,r.jsx)(s.code,{children:"Economie.retirer()"}),", respectant l'encapsulation."]})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"upgrade_base",children:(0,r.jsx)(s.code,{children:"upgrade_base"})}),"\n",(0,r.jsx)(s.p,{children:"Am\xe9liore la base du joueur si possible."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def upgrade_base(self):\n    """Am\xe9liore la base si possible"""\n    if self.base_level >= 4:\n        return False\n    \n    # Trouve le prix de l\'am\xe9lioration suivante\n    next_upgrade = self.base_upgrades[self.base_level - 1]\n    \n    if self.player.economie.retirer(next_upgrade["price"]):\n        self.base_level = next_upgrade["level"]\n        return True\n    else:\n        return False\n'})}),"\n",(0,r.jsx)(s.h4,{id:"retour-2",children:"Retour"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Valeur"}),(0,r.jsx)(s.th,{children:"Condition"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"True"})}),(0,r.jsx)(s.td,{children:"Am\xe9lioration r\xe9ussie"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"False"})}),(0,r.jsx)(s.td,{children:"Niveau max atteint ou fonds insuffisants"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"comportement-1",children:"Comportement"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph TD\n    A[upgrade_base] --\x3e B{base_level >= 4?}\n    B --\x3e|Oui| C[return False]\n    B --\x3e|Non| D[Trouver prix upgrade]\n    D --\x3e E{Retrait r\xe9ussi?}\n    E --\x3e|Oui| F[base_level++]\n    E --\x3e|Non| G[return False]\n    F --\x3e H[return True]\n    \n    style H fill:#00C864\n    style C fill:#FF6B6B\n    style G fill:#FF6B6B\n"})}),"\n",(0,r.jsx)(s.h4,{id:"exemples",children:"Exemples"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"shop = Shop(player, font, screen)\n\n# Niveau 1, solde = 1200\u20bf\nshop.upgrade_base()  # True, niveau = 2, solde = 200\u20bf\n\n# Niveau 2, solde = 200\u20bf\nshop.upgrade_base()  # False (fonds insuffisants)\n\n# Niveau 4 (max)\nshop.upgrade_base()  # False (niveau max)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-affichage-graphique",children:"\ud83c\udfa8 Affichage graphique"}),"\n",(0,r.jsx)(s.h3,{id:"get_base_color_filter",children:(0,r.jsx)(s.code,{children:"get_base_color_filter"})}),"\n",(0,r.jsx)(s.p,{children:"Retourne la couleur de bordure selon le niveau de base."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def get_base_color_filter(self):\n    """Retourne la couleur de bordure selon le niveau de base"""\n    if self.base_level == 1:\n        return (80, 150, 200)  # Bleu\n    elif self.base_level == 2:\n        return (150, 100, 200)  # Violet\n    elif self.base_level == 3:\n        return (200, 150, 50)  # Or\n    else:  # Niveau 4\n        return (50, 200, 150)  # Turquoise\n'})}),"\n",(0,r.jsx)(s.h4,{id:"palette-de-couleurs",children:"Palette de couleurs"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Niveau"}),(0,r.jsx)(s.th,{children:"Couleur"}),(0,r.jsx)(s.th,{children:"RGB"}),(0,r.jsx)(s.th,{children:"Signification"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"1"})}),(0,r.jsx)(s.td,{children:"\ud83d\udd35 Bleu"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(80, 150, 200)"})}),(0,r.jsx)(s.td,{children:"Niveau de base"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"2"})}),(0,r.jsx)(s.td,{children:"\ud83d\udfe3 Violet"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(150, 100, 200)"})}),(0,r.jsx)(s.td,{children:"Premi\xe8re am\xe9lioration"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"3"})}),(0,r.jsx)(s.td,{children:"\ud83d\udfe1 Or"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(200, 150, 50)"})}),(0,r.jsx)(s.td,{children:"Deuxi\xe8me am\xe9lioration"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"4"})}),(0,r.jsx)(s.td,{children:"\ud83d\udfe2 Turquoise"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(50, 200, 150)"})}),(0,r.jsx)(s.td,{children:"Niveau maximum"})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"draw",children:(0,r.jsx)(s.code,{children:"draw"})}),"\n",(0,r.jsx)(s.p,{children:"Dessine l'interface compl\xe8te du shop sur l'\xe9cran."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"def draw(self):\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Cette m\xe9thode est ",(0,r.jsx)(s.strong,{children:"complexe"})," et se d\xe9compose en plusieurs \xe9tapes :"]}),"\n",(0,r.jsx)(s.h4,{id:"1-fond-du-shop",children:"1. Fond du shop"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"shop_y = self.screen.get_height() - BAR_HEIGHT\nshop_width = self.screen.get_width()\n\n# Fond avec d\xe9grad\xe9\nshop_bg = pygame.Surface((shop_width, BAR_HEIGHT), pygame.SRCALPHA)\nfor i in range(BAR_HEIGHT):\n    alpha = int(200 - (i / BAR_HEIGHT) * 50)\n    color = (20 + i // 5, 25 + i // 5, 35 + i // 5, alpha)\n    pygame.draw.line(shop_bg, color, (0, i), (shop_width, i))\nself.screen.blit(shop_bg, (0, shop_y))\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Effet visuel :"})," D\xe9grad\xe9 vertical semi-transparent (alpha 200\u2192150)."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h4,{id:"2-bordures-d\xe9coratives",children:"2. Bordures d\xe9coratives"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Bordure sup\xe9rieure\npygame.draw.line(self.screen, (100, 150, 200), (0, shop_y), (shop_width, shop_y), 3)\npygame.draw.line(self.screen, (150, 200, 255), (0, shop_y + 1), (shop_width, shop_y + 1), 1)\n\n# Coins d\xe9coratifs\ncorner_size = 20\npygame.draw.line(self.screen, (150, 200, 255), (0, shop_y), (corner_size, shop_y), 4)\npygame.draw.line(self.screen, (150, 200, 255), (0, shop_y), (0, shop_y + corner_size), 4)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Effet visuel :"})," Lignes cyan lumineuses pour un style futuriste."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h4,{id:"3-calcul-de-la-disposition",children:"3. Calcul de la disposition"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"num_ships = len(self.ships)\ntotal_width = num_ships * (ICON_SIZE + 2 * CASE_PADDING) + (num_ships - 1) * ICON_MARGIN\nstart_x = (self.screen.get_width() - total_width) // 2\ny = self.screen.get_height() - BAR_HEIGHT + (BAR_HEIGHT - ICON_SIZE) // 2\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"R\xe9sultat :"})," Les ic\xf4nes sont ",(0,r.jsx)(s.strong,{children:"centr\xe9es horizontalement"})," avec espacement r\xe9gulier."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2190 shop_y\n\u2502    [Petit] [Moyen] [Grand] [Foreuse] [Tr]  \u2502 \u2190 Centr\xe9\n\u2502              \u2191                               \u2502\n\u2502          start_x                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h4,{id:"4-dessin-des-vaisseaux",children:"4. Dessin des vaisseaux"}),"\n",(0,r.jsx)(s.p,{children:"Pour chaque vaisseau :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"for i, ship in enumerate(self.ships):\n    x = start_x + i * (ICON_SIZE + 2 * CASE_PADDING + ICON_MARGIN)\n    case_rect = pygame.Rect(x, y, ICON_SIZE + 2 * CASE_PADDING, ICON_SIZE + 2 * CASE_PADDING)\n    \n    hovered = case_rect.collidepoint(mouse_pos)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"a. Effet d'ombre"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"shadow_rect = case_rect.copy()\nshadow_rect.x += 3\nshadow_rect.y += 3\npygame.draw.rect(self.screen, (20, 20, 20), shadow_rect, border_radius=8)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"b. Fond avec hover"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"color = (60, 60, 80) if not hovered else (90, 90, 120)\npygame.draw.rect(self.screen, color, case_rect, border_radius=8)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"c. Bordure anim\xe9e"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"border_color = (100, 100, 140) if not hovered else (150, 200, 255)\npygame.draw.rect(self.screen, border_color, case_rect, border_radius=8, width=2)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"d. Ic\xf4ne avec glow au survol"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'icon_size = ICON_SIZE + 8 if hovered else ICON_SIZE\nicon_img = pygame.transform.scale(ship["image"], (icon_size, icon_size))\nicon_x = x + CASE_PADDING + (ICON_SIZE - icon_size) // 2\nicon_y = y + CASE_PADDING + (ICON_SIZE - icon_size) // 2\n\nif hovered:\n    glow_surface = pygame.Surface((icon_size + 8, icon_size + 8), pygame.SRCALPHA)\n    pygame.draw.circle(glow_surface, (255, 255, 255, 30), \n                     (icon_size // 2 + 4, icon_size // 2 + 4), icon_size // 2 + 4)\n    self.screen.blit(glow_surface, (icon_x - 4, icon_y - 4))\n\nself.screen.blit(icon_img, (icon_x, icon_y))\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"e. Tooltip au survol"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"if hovered:\n    info_bg = pygame.Surface((250, 30), pygame.SRCALPHA)\n    pygame.draw.rect(info_bg, (0, 0, 0, 200), info_bg.get_rect(), border_radius=6)\n    pygame.draw.rect(info_bg, (255, 215, 0), info_bg.get_rect(), border_radius=6, width=2)\n    \n    info_text = self.font.render(f\"{ship['name']} - {ship['price']} coins\", True, (255, 255, 100))\n    text_rect = info_text.get_rect(center=(125, 15))\n    info_bg.blit(info_text, text_rect)\n    \n    bg_rect = info_bg.get_rect(center=(case_rect.centerx, case_rect.top - 20))\n    self.screen.blit(info_bg, bg_rect)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h4,{id:"5-dessin-de-la-base-am\xe9lioration",children:"5. Dessin de la base (am\xe9lioration)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"base_x = start_x + total_width + ICON_MARGIN * 3\ncase_rect = pygame.Rect(base_x, y, ICON_SIZE + 2 * CASE_PADDING, ICON_SIZE + 2 * CASE_PADDING)\nhovered = case_rect.collidepoint(mouse_pos)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"a. Effet arc-en-ciel (niveau max)"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"if self.base_level >= 4:\n    gradient_colors = [(255, 215, 0), (255, 140, 0), (255, 69, 0)]\n    for i, col in enumerate(gradient_colors):\n        offset = i * 2\n        inner_rect = case_rect.inflate(-offset, -offset)\n        pygame.draw.rect(self.screen, col, inner_rect, border_radius=8, width=2)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"b. Bordure selon niveau"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"border_color = self.get_base_color_filter() if self.base_level < 4 else (255, 215, 0)\nif hovered:\n    border_color = tuple(min(c + 50, 255) for c in border_color)\npygame.draw.rect(self.screen, border_color, case_rect, border_radius=8, width=3)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"c. Indicateurs de niveau"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"star_color = (255, 255, 100) if self.base_level < 4 else (255, 215, 0)\nstar_positions = [\n    (icon_x + icon_size * 0.2, icon_y + icon_size * 0.2),\n    (icon_x + icon_size * 0.8, icon_y + icon_size * 0.2),\n    (icon_x + icon_size * 0.2, icon_y + icon_size * 0.8),\n    (icon_x + icon_size * 0.8, icon_y + icon_size * 0.8)\n]\n\nfor i in range(min(self.base_level, 4)):\n    star_x, star_y = star_positions[i]\n    pygame.draw.circle(self.screen, star_color, (int(star_x), int(star_y)), 4)\n    pygame.draw.circle(self.screen, (255, 255, 255), (int(star_x), int(star_y)), 2)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Disposition des \xe9toiles :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Niveau 1:     Niveau 2:     Niveau 3:     Niveau 4:\n\u2b50 .          \u2b50 \u2b50          \u2b50 \u2b50          \u2b50 \u2b50\n. .          . .          \u2b50 .          \u2b50 \u2b50\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-gestion-des-clics",children:"\ud83c\udfae Gestion des clics"}),"\n",(0,r.jsx)(s.h3,{id:"handle_click",children:(0,r.jsx)(s.code,{children:"handle_click"})}),"\n",(0,r.jsx)(s.p,{children:"D\xe9tecte les clics et effectue l'action correspondante."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def handle_click(self, pos):\n    """G\xe8re les clics sur les boutons du shop et retourne le type de vaisseau achet\xe9 ou \'base_upgrade\'"""\n    # V\xe9rifier clic sur am\xe9lioration de base\n    if hasattr(self, \'base_rect\') and self.base_rect.collidepoint(pos):\n        if self.upgrade_base():\n            return "base_upgrade"\n        return None\n    \n    # V\xe9rifier clic sur vaisseaux\n    for ship in self.ships:\n        if "rect" in ship and ship["rect"].collidepoint(pos):\n            return self.buy_ship(ship)\n    \n    return None\n'})}),"\n",(0,r.jsx)(s.h4,{id:"param\xe8tres-3",children:"Param\xe8tres"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tre"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"pos"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"tuple[int, int]"})}),(0,r.jsxs)(s.td,{children:["Position du clic ",(0,r.jsx)(s.code,{children:"(x, y)"})]})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"retour-3",children:"Retour"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Valeur"}),(0,r.jsx)(s.th,{children:"Signification"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"str"})}),(0,r.jsx)(s.td,{children:"Nom vaisseau"}),(0,r.jsx)(s.td,{children:"Achat de vaisseau r\xe9ussi"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"str"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:'"base_upgrade"'})}),(0,r.jsx)(s.td,{children:"Am\xe9lioration de base r\xe9ussie"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"None"})}),(0,r.jsx)(s.td,{children:"\u2014"}),(0,r.jsx)(s.td,{children:"Aucun achat (clic hors zone ou fonds insuffisants)"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"flux-de-d\xe9tection",children:"Flux de d\xe9tection"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph TD\n    A[handle_click] --\x3e B{Clic sur base?}\n    B --\x3e|Oui| C[upgrade_base]\n    B --\x3e|Non| D{Clic sur vaisseau?}\n    \n    C --\x3e E{Succ\xe8s?}\n    E --\x3e|Oui| F[return 'base_upgrade']\n    E --\x3e|Non| G[return None]\n    \n    D --\x3e|Oui| H[buy_ship]\n    D --\x3e|Non| G\n    \n    H --\x3e I{Succ\xe8s?}\n    I --\x3e|Oui| J[return nom_vaisseau]\n    I --\x3e|Non| G\n    \n    style F fill:#00C864\n    style J fill:#00C864\n    style G fill:#FFB86C\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-int\xe9gration-dans-le-jeu",children:"\ud83c\udfaf Int\xe9gration dans le jeu"}),"\n",(0,r.jsxs)(s.h3,{id:"initialisation-dans-mainpy",children:["Initialisation dans ",(0,r.jsx)(s.code,{children:"main.py"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'from classes.Shop import Shop\nfrom classes.Player import Player\n\n# Cr\xe9ation des joueurs\nplayer1 = Player("Alice", solde_initial=500)\nplayer2 = Player("Bob", solde_initial=500)\n\n# Cr\xe9ation des shops\nfont = pygame.font.Font("assets/fonts/SpaceNova.otf", 22)\nshop1 = Shop(player1, font, screen)\nshop2 = Shop(player2, font, screen)\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"boucle-de-jeu",children:"Boucle de jeu"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'while running:\n    for event in pygame.event.get():\n        if event.type == pygame.MOUSEBUTTONDOWN and event.button == 1:\n            # D\xe9terminer le shop actif selon le joueur\n            shop = shop1 if Turn.players[0].id == 0 else shop2\n            \n            # G\xe9rer le clic\n            type_action = shop.handle_click(event.pos)\n            \n            if type_action:\n                joueur_actuel = Turn.players[0]\n                \n                # Achat de vaisseau\n                if type_action in ["Petit", "Moyen", "Grand", "Foreuse", "Transporteur"]:\n                    position = trouver_position_libre_base(map_obj, joueur_actuel.id)\n                    \n                    if position:\n                        nouveau_vaisseau = creer_vaisseau_achete(\n                            type_action, position, next_uid[0],\n                            joueur_actuel.id, images, paths\n                        )\n                        if nouveau_vaisseau:\n                            next_uid[0] += 1\n                            joueur_actuel.ships.append(nouveau_vaisseau)\n                            nouveau_vaisseau.occuper_plateau(map_obj.grille, Type.VAISSEAU)\n                    else:\n                        # Rembourser si pas de place\n                        for ship_data in shop.ships:\n                            if ship_data["name"] == type_action:\n                                joueur_actuel.economie.ajouter(ship_data["price"])\n                \n                # Am\xe9lioration de base\n                elif type_action == "base_upgrade":\n                    mothership = joueur_actuel.getMotherShip()\n                    mothership.apply_level(mothership.tier + 1)\n    \n    # Affichage\n    shop.draw()\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-diagramme-de-s\xe9quence-complet",children:"\ud83d\udcca Diagramme de s\xe9quence complet"}),"\n",(0,r.jsx)(s.h3,{id:"achat-de-vaisseau-avec-placement",children:"Achat de vaisseau avec placement"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:'sequenceDiagram\n    participant U as Utilisateur\n    participant M as Main Loop\n    participant S as Shop\n    participant P as Player\n    participant E as Economie\n    participant Map as Map\n    \n    U->>M: Clic sur vaisseau\n    M->>S: handle_click(pos)\n    S->>S: Identifier vaisseau\n    S->>S: buy_ship(ship)\n    S->>P: economie.retirer(price)\n    P->>E: retirer(price)\n    \n    alt Fonds suffisants\n        E->>E: solde -= price\n        E->>P: True\n        P->>S: True\n        S->>M: "Petit"\n        M->>M: trouver_position_libre_base()\n        \n        alt Position trouv\xe9e\n            M->>M: creer_vaisseau_achete()\n            M->>P: ships.append(vaisseau)\n            M->>Map: occuper_plateau()\n            Note over U: \u2705 Vaisseau cr\xe9\xe9\n        else Aucune position\n            M->>E: ajouter(price)\n            Note over U: \u26a0\ufe0f Rembours\xe9\n        end\n    else Fonds insuffisants\n        E->>P: False\n        P->>S: False\n        S->>M: None\n        Note over U: \u274c Achat \xe9chou\xe9\n    end\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-effets-visuels",children:"\ud83c\udfa8 Effets visuels"}),"\n",(0,r.jsx)(s.h3,{id:"\xe9tats-des-boutons",children:"\xc9tats des boutons"}),"\n",(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col col--6",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card__header",children:(0,r.jsx)("h4",{children:"Normal"})}),(0,r.jsx)("div",{className:"card__body",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["Fond : ",(0,r.jsx)("code",{children:"(60, 60, 80)"})]}),(0,r.jsxs)("li",{children:["Bordure : ",(0,r.jsx)("code",{children:"(100, 100, 140)"})]}),(0,r.jsx)("li",{children:"Ic\xf4ne : Taille normale (50px)"}),(0,r.jsx)("li",{children:"Ombre : Visible"})]})})]})}),(0,r.jsx)("div",{className:"col col--6",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card__header",children:(0,r.jsx)("h4",{children:"Survol (Hover)"})}),(0,r.jsx)("div",{className:"card__body",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["Fond : ",(0,r.jsx)("code",{children:"(90, 90, 120)"})]}),(0,r.jsxs)("li",{children:["Bordure : ",(0,r.jsx)("code",{children:"(150, 200, 255)"})]}),(0,r.jsx)("li",{children:"Ic\xf4ne : Agrandie (58px)"}),(0,r.jsx)("li",{children:"Glow : Halo blanc semi-transparent"}),(0,r.jsx)("li",{children:"Tooltip : Nom + Prix"})]})})]})})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"animation-de-la-base",children:"Animation de la base"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Niveau < 4 :"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Bordure de couleur selon niveau"}),"\n",(0,r.jsx)(s.li,{children:"Hover : \xc9claircissement +50"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Niveau 4 (max) :"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Triple bordure d\xe9grad\xe9e (Or \u2192 Orange \u2192 Rouge-Orange)"}),"\n",(0,r.jsx)(s.li,{children:"\xc9toiles dor\xe9es"}),"\n",(0,r.jsx)(s.li,{children:"Effet arc-en-ciel"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-tests-et-validation",children:"\ud83e\uddea Tests et validation"}),"\n",(0,r.jsx)(s.h3,{id:"test-des-achats",children:"Test des achats"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'import unittest\nfrom classes.Shop import Shop\nfrom classes.Player import Player\n\nclass TestShop(unittest.TestCase):\n    def setUp(self):\n        self.player = Player("Test", solde_initial=1000)\n        self.shop = Shop(self.player, None, None)\n    \n    def test_buy_ship_success(self):\n        ship = {"name": "Petit", "price": 325}\n        result = self.shop.buy_ship(ship)\n        \n        self.assertEqual(result, "Petit")\n        self.assertEqual(self.player.economie.solde, 675)\n    \n    def test_buy_ship_insufficient(self):\n        ship = {"name": "Grand", "price": 1050}\n        result = self.shop.buy_ship(ship)\n        \n        self.assertIsNone(result)\n        self.assertEqual(self.player.economie.solde, 1000)\n    \n    def test_upgrade_base_success(self):\n        result = self.shop.upgrade_base()\n        \n        self.assertTrue(result)\n        self.assertEqual(self.shop.base_level, 2)\n        self.assertEqual(self.player.economie.solde, 0)\n    \n    def test_upgrade_base_max_level(self):\n        self.shop.base_level = 4\n        result = self.shop.upgrade_base()\n        \n        self.assertFalse(result)\n        self.assertEqual(self.shop.base_level, 4)\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-cas-limites",children:"\ud83d\udd0d Cas limites"}),"\n",(0,r.jsx)(s.h3,{id:"1-achat-avec-solde-exact",children:"1. Achat avec solde exact"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'player = Player("Alice", solde_initial=325)\nshop = Shop(player, font, screen)\n\nship = {"name": "Petit", "price": 325}\nresult = shop.buy_ship(ship)\n\n# \u2705 Succ\xe8s\nassert result == "Petit"\nassert player.economie.solde == 0\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"2-am\xe9lioration-au-niveau-max",children:"2. Am\xe9lioration au niveau max"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"shop.base_level = 4\n\nresult = shop.upgrade_base()\n\n# \u274c Refus\n```python\nassert result == False\nassert shop.base_level == 4  # Inchang\xe9\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"3-images-manquantes",children:"3. Images manquantes"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'# Si assets/img/ships/shop/petit.png n\'existe pas\nshop = Shop(player, font, screen)\n\n# load_image cr\xe9e automatiquement un placeholder gris\nassert shop.ships[0]["image"] is not None\nassert shop.ships[0]["image"].get_size() == (50, 50)\n'})}),"\n",(0,r.jsx)(s.admonition,{title:"Gestion d'erreur",type:"tip",children:(0,r.jsxs)(s.p,{children:["Le jeu ",(0,r.jsx)(s.strong,{children:"ne crash jamais"})," m\xeame si toutes les images sont absentes gr\xe2ce aux placeholders."]})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"4-clics-hors-zone",children:"4. Clics hors zone"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Clic en dehors du shop\nresult = shop.handle_click((0, 0))\n\nassert result is None  # Aucune action\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"5-am\xe9lioration-sans-fonds",children:"5. Am\xe9lioration sans fonds"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'player = Player("Bob", solde_initial=500)\nshop = Shop(player, font, screen)\n\n# Niveau 1 \u2192 2 co\xfbte 1000\u20bf\nresult = shop.upgrade_base()\n\n# \u274c \xc9chec\nassert result == False\nassert shop.base_level == 1  # Inchang\xe9\nassert player.economie.solde == 500  # Non d\xe9bit\xe9\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-optimisations-possibles",children:"\ud83c\udfaf Optimisations possibles"}),"\n",(0,r.jsx)(s.h3,{id:"1-cache-des-rectangles",children:"1. Cache des rectangles"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Probl\xe8me actuel :"})," Les rectangles (",(0,r.jsx)(s.code,{children:'ship["rect"]'}),") sont recalcul\xe9s \xe0 chaque frame dans ",(0,r.jsx)(s.code,{children:"draw()"}),"."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Solution :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'class Shop:\n    def __init__(self, player, font, screen):\n        # ... init existant ...\n        self._rects_cached = False\n        self._ship_rects = []\n        self._base_rect = None\n    \n    def _cache_rects(self):\n        """Calcule et met en cache les rectangles une seule fois"""\n        if self._rects_cached:\n            return\n        \n        num_ships = len(self.ships)\n        total_width = num_ships * (ICON_SIZE + 2 * CASE_PADDING) + (num_ships - 1) * ICON_MARGIN\n        start_x = (self.screen.get_width() - total_width) // 2\n        y = self.screen.get_height() - BAR_HEIGHT + (BAR_HEIGHT - ICON_SIZE) // 2\n        \n        for i, ship in enumerate(self.ships):\n            x = start_x + i * (ICON_SIZE + 2 * CASE_PADDING + ICON_MARGIN)\n            ship["rect"] = pygame.Rect(x, y, ICON_SIZE + 2 * CASE_PADDING, ICON_SIZE + 2 * CASE_PADDING)\n        \n        base_x = start_x + total_width + ICON_MARGIN * 3\n        self._base_rect = pygame.Rect(base_x, y, ICON_SIZE + 2 * CASE_PADDING, ICON_SIZE + 2 * CASE_PADDING)\n        self.base_rect = self._base_rect\n        \n        self._rects_cached = True\n    \n    def draw(self):\n        self._cache_rects()  # Calculer une seule fois\n        # ... reste du code ...\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Gain :"})," \xc9vite ~6 calculs de rectangles par frame (60 FPS = 360 calculs/seconde)."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"2-sprite-batching",children:"2. Sprite batching"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Probl\xe8me actuel :"})," Chaque ic\xf4ne est dessin\xe9e individuellement avec plusieurs ",(0,r.jsx)(s.code,{children:"blit()"}),"."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Solution :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"def draw(self):\n    # Cr\xe9er une surface temporaire pour tout le shop\n    shop_surface = pygame.Surface((shop_width, BAR_HEIGHT), pygame.SRCALPHA)\n    \n    # Dessiner tout sur shop_surface\n    # ...\n    \n    # Un seul blit final\n    self.screen.blit(shop_surface, (0, shop_y))\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Gain :"})," R\xe9duit les appels ",(0,r.jsx)(s.code,{children:"blit()"})," de ~20 \xe0 1."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"3-pr\xe9chargement-des-tooltips",children:"3. Pr\xe9chargement des tooltips"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Probl\xe8me actuel :"})," Les surfaces de tooltip sont recr\xe9\xe9es \xe0 chaque hover."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Solution :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'class Shop:\n    def __init__(self, player, font, screen):\n        # ... init existant ...\n        self._tooltip_cache = {}\n    \n    def _get_tooltip(self, ship_name, ship_price):\n        key = (ship_name, ship_price)\n        \n        if key not in self._tooltip_cache:\n            info_bg = pygame.Surface((250, 30), pygame.SRCALPHA)\n            pygame.draw.rect(info_bg, (0, 0, 0, 200), info_bg.get_rect(), border_radius=6)\n            pygame.draw.rect(info_bg, (255, 215, 0), info_bg.get_rect(), border_radius=6, width=2)\n            \n            info_text = self.font.render(f"{ship_name} - {ship_price} coins", True, (255, 255, 100))\n            text_rect = info_text.get_rect(center=(125, 15))\n            info_bg.blit(info_text, text_rect)\n            \n            self._tooltip_cache[key] = info_bg\n        \n        return self._tooltip_cache[key]\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-variantes-de-design",children:"\ud83c\udfa8 Variantes de design"}),"\n",(0,r.jsx)(s.h3,{id:"shop-minimaliste",children:"Shop minimaliste"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def draw_minimal(self):\n    """Version simplifi\xe9e sans effets visuels"""\n    shop_y = self.screen.get_height() - BAR_HEIGHT\n    \n    # Fond plat\n    pygame.draw.rect(self.screen, (30, 30, 50), \n                    (0, shop_y, self.screen.get_width(), BAR_HEIGHT))\n    \n    # Ic\xf4nes simples sans hover\n    for i, ship in enumerate(self.ships):\n        x = 50 + i * 80\n        self.screen.blit(ship["image"], (x, shop_y + 10))\n        \n        # Prix\n        price_text = self.font.render(f"{ship[\'price\']}\u20bf", True, (255, 255, 255))\n        self.screen.blit(price_text, (x, shop_y + 65))\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"shop-avec-animations",children:"Shop avec animations"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'class AnimatedShop(Shop):\n    def __init__(self, player, font, screen):\n        super().__init__(player, font, screen)\n        self._icon_offsets = [0] * len(self.ships)\n        self._icon_speeds = [random.uniform(0.5, 1.5) for _ in self.ships]\n    \n    def update(self, dt):\n        """Anime les ic\xf4nes (\xe0 appeler avant draw)"""\n        for i in range(len(self.ships)):\n            self._icon_offsets[i] += self._icon_speeds[i] * dt\n    \n    def draw(self):\n        # ... code existant ...\n        \n        # Modifier icon_y pour ajouter un flottement\n        for i, ship in enumerate(self.ships):\n            offset_y = math.sin(self._icon_offsets[i]) * 3  # \xb13px\n            icon_y = y + CASE_PADDING + offset_y\n            # ... dessiner l\'ic\xf4ne ...\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Usage :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Dans la boucle de jeu\ndt = clock.tick(60) / 1000.0  # Delta time en secondes\nshop.update(dt)\nshop.draw()\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-interactions-avec-dautres-classes",children:"\ud83d\udd17 Interactions avec d'autres classes"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-mermaid",children:"graph TD\n    S[Shop] --\x3e P[Player]\n    S --\x3e E[Economie]\n    S --\x3e Sc[pygame.Screen]\n    S --\x3e F[pygame.Font]\n    \n    P --\x3e E\n    P --\x3e MS[MotherShip]\n    P --\x3e Sh[Ship]\n    \n    M[Main Loop] --\x3e S\n    M --\x3e T[Turn]\n    M --\x3e Map[Map]\n    \n    style S fill:#50C8FF\n    style P fill:#FFC800\n    style E fill:#00C864\n"})}),"\n",(0,r.jsx)(s.h3,{id:"relations-cl\xe9s",children:"Relations cl\xe9s"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Classe"}),(0,r.jsx)(s.th,{children:"Relation"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Player"})}),(0,r.jsx)(s.td,{children:"Composition"}),(0,r.jsx)(s.td,{children:"Shop poss\xe8de une r\xe9f\xe9rence \xe0 Player"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Economie"})}),(0,r.jsx)(s.td,{children:"Utilisation"}),(0,r.jsx)(s.td,{children:"Shop d\xe9l\xe8gue les transactions \xe0 Economie"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"MotherShip"})}),(0,r.jsx)(s.td,{children:"Modification"}),(0,r.jsx)(s.td,{children:"Shop d\xe9clenche l'am\xe9lioration de la base"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Main Loop"})}),(0,r.jsx)(s.td,{children:"Orchestration"}),(0,r.jsx)(s.td,{children:"Main g\xe8re les clics et la cr\xe9ation de vaisseaux"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Turn"})}),(0,r.jsx)(s.td,{children:"Contexte"}),(0,r.jsx)(s.td,{children:"D\xe9termine quel shop est actif"})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-calculs-de-disposition",children:"\ud83d\udcd0 Calculs de disposition"}),"\n",(0,r.jsx)(s.h3,{id:"formules-de-positionnement",children:"Formules de positionnement"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Largeur totale occup\xe9e par N vaisseaux\ntotal_width = N * (ICON_SIZE + 2*CASE_PADDING) + (N-1) * ICON_MARGIN\n\n# Position X de l'ic\xf4ne i (centrage)\nstart_x = (SCREEN_WIDTH - total_width) / 2\nx_i = start_x + i * (ICON_SIZE + 2*CASE_PADDING + ICON_MARGIN)\n\n# Position Y (centrage vertical dans la barre)\ny = SCREEN_HEIGHT - BAR_HEIGHT + (BAR_HEIGHT - ICON_SIZE) / 2\n\n# Position de la base (d\xe9cal\xe9e)\nbase_x = start_x + total_width + ICON_MARGIN * 3\n"})}),"\n",(0,r.jsx)(s.h3,{id:"exemple-num\xe9rique-19201080",children:"Exemple num\xe9rique (1920\xd71080)"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"N = 5  # 5 vaisseaux\nICON_SIZE = 50\nCASE_PADDING = 8\nICON_MARGIN = 20\nBAR_HEIGHT = 85\n\ntotal_width = 5*(50+16) + 4*20 = 330 + 80 = 410px\n\nstart_x = (1920 - 410) / 2 = 755px\n\n# Positions X des ic\xf4nes\nx_0 = 755px\nx_1 = 755 + 86 = 841px\nx_2 = 841 + 86 = 927px\nx_3 = 927 + 86 = 1013px\nx_4 = 1013 + 86 = 1099px\n\n# Position de la base\nbase_x = 755 + 410 + 60 = 1225px\n\ny = 1080 - 85 + (85-50)/2 = 995 + 17.5 = 1012.5px\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-bonnes-pratiques",children:"\ud83c\udf93 Bonnes pratiques"}),"\n",(0,r.jsxs)("div",{className:"alert alert--success",children:[(0,r.jsx)("h4",{children:"\u2705 Recommandations"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["Toujours appeler ",(0,r.jsx)("code",{children:"draw()"})," ",(0,r.jsx)("strong",{children:"apr\xe8s"})," le rendu du jeu"]}),(0,r.jsxs)("li",{children:["G\xe9rer ",(0,r.jsx)("code",{children:"handle_click()"})," dans la boucle d'\xe9v\xe9nements"]}),(0,r.jsxs)("li",{children:["V\xe9rifier le retour de ",(0,r.jsx)("code",{children:"handle_click()"})," pour confirmer l'achat"]}),(0,r.jsx)("li",{children:"Rembourser si le vaisseau ne peut pas \xeatre plac\xe9"}),(0,r.jsxs)("li",{children:["Utiliser des constantes de ",(0,r.jsx)("code",{children:"blazyck.py"})," pour les dimensions"]})]})]}),"\n",(0,r.jsxs)("div",{className:"alert alert--danger",children:[(0,r.jsx)("h4",{children:"\u274c \xc0 \xe9viter"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["Modifier ",(0,r.jsx)("code",{children:"player.economie.solde"})," directement au lieu de passer par les m\xe9thodes"]}),(0,r.jsxs)("li",{children:["Oublier de mettre \xe0 jour ",(0,r.jsx)("code",{children:"base_level"})," apr\xe8s un upgrade"]}),(0,r.jsxs)("li",{children:["Appeler ",(0,r.jsx)("code",{children:"draw()"})," plusieurs fois par frame (co\xfbteux)"]}),(0,r.jsx)("li",{children:"Ne pas g\xe9rer le cas o\xf9 aucune position libre n'est trouv\xe9e"}),(0,r.jsx)("li",{children:"Ignorer les valeurs de retour des m\xe9thodes d'achat"})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-probl\xe8mes-connus",children:"\ud83d\udc1b Probl\xe8mes connus"}),"\n",(0,r.jsx)(s.h3,{id:"1-pas-de-limite-de-vaisseaux",children:"1. Pas de limite de vaisseaux"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Probl\xe8me :"})," Un joueur peut acheter autant de vaisseaux qu'il veut, m\xeame s'il n'y a plus de place sur la carte."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Sympt\xf4me :"})," Argent d\xe9bit\xe9 mais vaisseau non cr\xe9\xe9."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution temporaire :"})," Rembourser si ",(0,r.jsx)(s.code,{children:"trouver_position_libre_base()"})," retourne ",(0,r.jsx)(s.code,{children:"None"}),"."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Solution id\xe9ale :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def buy_ship(self, ship):\n    """Ach\xe8te un vaisseau seulement si une position libre existe"""\n    # V\xe9rifier l\'espace avant de d\xe9biter\n    if not self._can_place_ship(ship["name"]):\n        return None\n    \n    if self.player.economie.retirer(ship["price"]):\n        return ship["name"]\n    return None\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"2-shop-ne-se-met-pas-\xe0-jour-visuellement",children:"2. Shop ne se met pas \xe0 jour visuellement"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Probl\xe8me :"})," Le niveau de la base affich\xe9 ne correspond pas au ",(0,r.jsx)(s.code,{children:"MotherShip.tier"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause :"})," ",(0,r.jsx)(s.code,{children:"shop.base_level"})," et ",(0,r.jsx)(s.code,{children:"mothership.tier"})," sont d\xe9synchronis\xe9s."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Solution :"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def upgrade_base(self):\n    """Am\xe9liore la base ET met \xe0 jour le MotherShip"""\n    if self.base_level >= 4:\n        return False\n    \n    next_upgrade = self.base_upgrades[self.base_level - 1]\n    \n    if self.player.economie.retirer(next_upgrade["price"]):\n        self.base_level = next_upgrade["level"]\n        \n        # Synchroniser avec le MotherShip\n        mothership = self.player.getMotherShip()\n        if mothership:\n            mothership.apply_level(self.base_level)\n        \n        return True\n    return False\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"3-collision-de-clics",children:"3. Collision de clics"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Probl\xe8me :"})," Cliquer sur un vaisseau alors qu'un autre \xe9l\xe9ment UI est devant."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution :"})," V\xe9rifier l'ordre Z (le shop est toujours au premier plan)."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Dans main.py\nfor event in pygame.event.get():\n    if event.type == pygame.MOUSEBUTTONDOWN:\n        # 1. V\xe9rifier le shop EN PREMIER\n        shop_action = shop.handle_click(event.pos)\n        if shop_action:\n            # Traiter l'achat\n            continue  # Ne pas propager le clic\n        \n        # 2. Ensuite v\xe9rifier les autres \xe9l\xe9ments\n        # ...\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-m\xe9triques-de-performance",children:"\ud83d\udcca M\xe9triques de performance"}),"\n",(0,r.jsx)(s.h3,{id:"temps-de-rendu-approximatif",children:"Temps de rendu (approximatif)"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Op\xe9ration"}),(0,r.jsx)(s.th,{children:"Temps"}),(0,r.jsx)(s.th,{children:"Pourcentage"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"D\xe9grad\xe9 de fond"}),(0,r.jsx)(s.td,{children:"~2ms"}),(0,r.jsx)(s.td,{children:"40%"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Dessin des 5 ic\xf4nes"}),(0,r.jsx)(s.td,{children:"~1.5ms"}),(0,r.jsx)(s.td,{children:"30%"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Effets de survol"}),(0,r.jsx)(s.td,{children:"~0.8ms"}),(0,r.jsx)(s.td,{children:"16%"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Bordures d\xe9coratives"}),(0,r.jsx)(s.td,{children:"~0.5ms"}),(0,r.jsx)(s.td,{children:"10%"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Tooltip"}),(0,r.jsx)(s.td,{children:"~0.2ms"}),(0,r.jsx)(s.td,{children:"4%"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Total"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"~5ms"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"100%"})})]})]})]}),"\n",(0,r.jsx)(s.admonition,{title:"Impact",type:"info",children:(0,r.jsxs)(s.p,{children:["\xc0 60 FPS, le shop utilise ",(0,r.jsx)(s.strong,{children:"~30% du budget de frame"})," (16.67ms). Les optimisations sugg\xe9r\xe9es peuvent r\xe9duire cela \xe0 ~15%."]})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-fonctionnalit\xe9s-futures",children:"\ud83d\udd2e Fonctionnalit\xe9s futures"}),"\n",(0,r.jsx)(s.h3,{id:"1-onglets-de-cat\xe9gories",children:"1. Onglets de cat\xe9gories"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'class ShopWithTabs(Shop):\n    def __init__(self, player, font, screen):\n        super().__init__(player, font, screen)\n        self.categories = {\n            "Combat": ["Petit", "Moyen", "Grand"],\n            "Support": ["Foreuse", "Transporteur"]\n        }\n        self.active_category = "Combat"\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"2-aper\xe7u-des-statistiques",children:"2. Aper\xe7u des statistiques"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'def draw_ship_stats(self, ship_name):\n    """Affiche les stats d\xe9taill\xe9es au survol"""\n    stats = SHIP_STATS[ship_name]\n    \n    stat_text = [\n        f"PV: {stats[\'pv_max\']}",\n        f"ATK: {stats[\'attaque\']}",\n        f"Port\xe9e: {stats[\'port_attaque\']}",\n        f"Vitesse: {stats[\'port_deplacement\']}"\n    ]\n    \n    # Dessiner un panneau d\xe9taill\xe9\n    # ...\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"3-raccourcis-clavier",children:"3. Raccourcis clavier"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'SHOP_HOTKEYS = {\n    pygame.K_1: "Petit",\n    pygame.K_2: "Moyen",\n    pygame.K_3: "Grand",\n    pygame.K_4: "Foreuse",\n    pygame.K_5: "Transporteur",\n    pygame.K_b: "base_upgrade"\n}\n\ndef handle_keypress(self, key):\n    """Achat rapide par touche"""\n    if key in SHOP_HOTKEYS:\n        action = SHOP_HOTKEYS[key]\n        if action == "base_upgrade":\n            return self.upgrade_base()\n        else:\n            ship = next((s for s in self.ships if s["name"] == action), None)\n            if ship:\n                return self.buy_ship(ship)\n    return None\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-r\xe9f\xe9rences",children:"\ud83d\udcda R\xe9f\xe9rences"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/classes/Player",children:"Classe Player"})," - Propri\xe9taire du shop"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/classes/Economie",children:"Classe Economie"})," - Gestion des transactions"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/constantes",children:"Constantes blazyck"})," - Dimensions UI"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"./ship/MotherShip.md",children:"MotherShip"})," - Am\xe9lioration de base"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/xenon-space---Video-game/docs/technicals/classes/ship/",children:"Classe Ship"})," - Vaisseaux achetables"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-conseils-dint\xe9gration",children:"\ud83d\udca1 Conseils d'int\xe9gration"}),"\n",(0,r.jsx)(s.h3,{id:"pattern-recommand\xe9",children:"Pattern recommand\xe9"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# === Initialisation (une seule fois) ===\nshops = {\n    0: Shop(player1, font, screen),\n    1: Shop(player2, font, screen)\n}\n\n# === Boucle de jeu ===\nwhile running:\n    # 1. \xc9v\xe9nements\n    for event in pygame.event.get():\n        if event.type == pygame.MOUSEBUTTONDOWN:\n            current_shop = shops[Turn.players[0].id]\n            action = current_shop.handle_click(event.pos)\n            \n            if action:\n                process_shop_action(action, Turn.players[0])\n    \n    # 2. Affichage\n    # ... dessiner le jeu ...\n    \n    # 3. Shop (toujours en dernier pour \xeatre au-dessus)\n    current_shop = shops[Turn.players[0].id]\n    current_shop.draw()\n    \n    pygame.display.flip()\n"})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>d});var i=n(6540);const r={},l=i.createContext(r);function a(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);